<script type="text/javascript">
    RED.nodes.registerType('combine-timeout', {
        category: 'combine',
        defaults: {
            topic: {value: ''},
            name: {value: ''},
            timeout: {value: 0}
        },
        inputs: 1,
        outputs: 1,
        icon: 'timer.png',
        align: 'left',
        color: '#D8BFD8',
        paletteLabel: 'timeout',
        label() {
            return this.name || ('timeout ' + this.timeout + ' s');
        }
    });
</script>

<script type="text/x-red" data-template-name="combine-timeout">
    <div class="form-row">
        <label for="node-input-topic"><i class="icon-tasks"></i> Topic</label>
        <input type="text" id="node-input-topic">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="icon-bookmark"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
    <div class="form-row">
        <label for="node-input-timeout"><i class="fa fa-history"></i> Timeout</label>
        <input type="number" id="node-input-timeout">
    </div>
</script>

<script type="text/x-red" data-help-name="combine-timeout">
    <p>
        Defer a message with truthy payload for given time.
        If another message arrives with falsy payload the timer is cancelled.
        Keeps track on each topics state, only one message per topic will be sent until resetted by a falsy payload.
    </p>
</script>
